{"droplet_id":132355654,"hostname":"db-pg","vendor_data":"Content-Type: multipart/mixed; boundary=\"===============8645434374073493512==\"\nMIME-Version: 1.0\n\n--===============8645434374073493512==\nMIME-Version: 1.0\nContent-Type: text/cloud-config; charset=\"us-ascii\"\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename=\"cloud-config\"\n\n#cloud-config\n\n# Enable root and password auth\ndisable_root: false\nssh_pwauth: true\n\n# Allow cloud-init to manage /etc/hosts\nmanage_etc_hosts: true\n\n# Set the default user to root and define the package mirrors\nsystem_info:\n   distro: ubuntu\n   default_user:\n      name: root\n      shell: /bin/bash\n      lock_passwd: false\n   package_mirrors:\n     - arches: [i386, amd64]\n       failsafe:\n         primary: http://archive.ubuntu.com/ubuntu\n         security: http://security.ubuntu.com/ubuntu\n       search:\n         primary:\n           - http://mirrors.digitalocean.com/ubuntu/\n         security: []\n\n\n--===============8645434374073493512==\nMIME-Version: 1.0\nContent-Type: text/cloud-boothook; charset=\"us-ascii\"\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename=\"entropy-seed\"\n\n#!/bin/sh -x\n# DigitalOcean Entropy Seed script\nlogger -t DigitalOcean 'adding random seed to /dev/urandom'\n(base64 -d \u003c\u003cEOE\n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\n\nEOE\n) \u003e /dev/urandom \n\n\n--===============8645434374073493512==\nMIME-Version: 1.0\nContent-Type: text/cloud-boothook; charset=\"us-ascii\"\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename=\"digitalocean_fixups\"\n\n#!/bin/sh\n\n# Disable the locale warning: by default imported cloud-images check the default\n# local and give a warning about invalid locales. The following line disable\n# the warning.\n\n# do not assume that /etc/skel exists\nif [ -d /etc/skel ]; then\n    touch /etc/skel/.cloud-locale-test.skip\nfi\ntouch /root/.cloud-locale-test.skip\n\n# Disable Ubuntu MOTD\nif [ -f /etc/default/motd-news ]; then\n    sed -e \"s/ENABLED=1/ENABLED=0/g\" \\\n        -i /etc/default/motd-news\nfi\n\n# Fix buggy cloud-init routes for IPv6\nr6c=\"/etc/sysconfig/network-scripts/route6-eth0\"\nif [ -f \"${r6c}\" ]; then\n    sed -e \"s|::/::|default|g\" -i \"${r6c}\"\n    awk '/default via/{system(\"ip -6 route add default via \"$NF\" dev eth0\")}' \"${r6c}\"\nelif [ -d \"/etc/sysconfig/network-scripts\" -a -f \"/etc/network/interfaces\" ]; then\n    # This deals with a bug in Fedora 27 where the network interface is not set\n    # properly by Cloud-init.\n    i6gw=$(egrep -A3 'iface eth0:1 inet6 static' /etc/network/interfaces | awk '/gateway/{print$NF}')\n    if [ -n \"${i6gw}\" ]; then\n        ip -6 route add default via ${i6gw} dev eth0\n        cat \u003e ${r6c} \u003c\u003cEOM\n# DigitalOcean: written by ConfigDrive customization.\ndefault via ${i6gw}\nEOM\n    fi\nfi\n\n# Fix screwy file permmissions on the system resolvers.\nchmod 0644 /etc/resolv.conf\n\n# Support automatic disk resizing per boot.\n# Only update /etc/hosts once per instance.\nmkdir -p /etc/cloud/cloud.cfg.d\ncat \u003e /etc/cloud/cloud.cfg.d/90-digitalocean.cfg \u003c\u003cEOM\n####\n# DigitalOcean: this file was written via cloud-init and composed from /etc/cloud/cloud.cfg\n#               In order to support resize events, 'growpart' and 'resizefs' are run each boot.\n#               'update_etc_hosts' will be run only once per instance. To see the differences, run\n#               'diff -u /etc/cloud/cloud.cfg /etc/cloud/cloud.cfg.d/90-digitalocean.cfg'.\n#\n#               This file was written to support Droplet $(\u003c/sys/devices/virtual/dmi/id/product_serial) on $(date +%Y-%m-%d)\n####\n\nEOM\nsed -e \"s/- growpart$/- [ growpart, always ]/g\" \\\n    -e \"s/- resizefs$/- [ resizefs, always ]/g\" \\\n    -e \"s/- update_etc_hosts$/- [ update_etc_hosts, once-per-instance ]/g\" \\\n    /etc/cloud/cloud.cfg \u003e\u003e /etc/cloud/cloud.cfg.d/90-digitalocean.cfg\n\n# Fix for machine-id's being dubiously present\ncat \u003e /var/lib/cloud/scripts/per-instance/machine_id.sh \u003c\u003cEOM\n#!/bin/bash\nCT=\\$(date +%s);\nFT=\\$(stat /etc/machine-id -c %Y);\nDIFF=\\$(expr \\$CT - \\$FT)\n# record timestamp on machine-id for testing\n# If /etc/machine_id is over 10m old on first-boot, delete it\nif [ -f /etc/machine-id ]; then\n    if [ \\$DIFF -lt 600 ]; then\n        exit 0\n    fi\nrm -rf /etc/machine-id\nfi\n\n# systemd will use dbus uudigen if its there\n# we need to reset this for Debain 9.\nif which dbus-uuidgen \u0026\u003e /dev/null; then\n    rm -rf /var/lib/dbus/machine-id\n    dbus-uuidgen --ensure=/var/lib/dbus/machine-id\nfi\n\nif which systemd-machine-id-setup \u0026\u003e /dev/null; then\n    rm -rf /etc/machine-id\n    systemd-machine-id-setup\nfi\nEOM\nchmod 0700 /var/lib/cloud/scripts/per-instance/machine_id.sh\n\n# DigitalOcean updated the vendor-data to better support various distributions.\n# This script makes it so older snapshots will work by restoring the default behavior\n# of cloud-init.\nif [ -e /etc/cloud/cloud.cfg.disabled ]; then\n    mv /etc/cloud/cloud.cfg /etc/cloud/cloud.cfg.d/99-digitalocean.cfg\n    mv /etc/cloud/cloud.cfg.disabled /etc/cloud/cloud.cfg\n    logger -t DigitalOcean \"restored default cloud-init behavior by renaming /etc/cloud/cloud.cfg.disabled to /etc/cloud/cloud.cfg\"\nfi\n\nif [ -d /etc/udev/rules.d ]; then\n    # Add udev rules to automount block storage volumes.\n    cat \u003e /etc/udev/rules.d/99-digitalocean-automount.rules \u003c\u003cEOM\n# Only try to automount DO block volumes.\nSUBSYSTEM!=\"block\", GOTO=\"do_automount_end\"\nENV{ID_VENDOR}!=\"DO\", GOTO=\"do_automount_end\"\nENV{ID_MODEL}!=\"Volume\", GOTO=\"do_automount_end\"\n# Only automount on the \"add\" action.\nACTION!=\"add\", GOTO=\"do_automount_end\"\n# Only try to automount filesystems we know about.\nENV{ID_FS_TYPE}!=\"ext4|xfs\", GOTO=\"do_automount_end\"\n\n# Create a temporary mountpoint and temporary location for the first-mount script.\nIMPORT{program}=\"/bin/sh -c 'echo TMP_MOUNT_DIR=\\$(mktemp -d -p /mnt .do-first-mount-XXXXXXXXX)'\"\nIMPORT{program}=\"/bin/sh -c 'echo TMP_SCRIPT=\\$(mktemp -t .do-first-mount-XXXXXXXXX.sh)'\"\n\n# Mount the volume at the temp mountpoint and copy the script off, then unmount.\nRUN{program}+=\"/bin/mount -o ro /dev/%k %E{TMP_MOUNT_DIR}\"\nRUN{program}+=\"/bin/sh -c '/bin/cp %E{TMP_MOUNT_DIR}/.first-mount.sh %E{TMP_SCRIPT} || exit 0'\"\nRUN{program}+=\"/bin/umount %E{TMP_MOUNT_DIR}\"\nRUN{program}+=\"/bin/rmdir %E{TMP_MOUNT_DIR}\"\n\n# Run the first-mount script. If it didn't exist this will be a no-op.\nRUN{program}+=\"/bin/sh %E{TMP_SCRIPT} '%E{ID_SERIAL}' '%E{ID_FS_TYPE}' '%E{ID_SERIAL_SHORT}' '%E{ID_FS_UUID}' '%E{ID_FS_LABEL}'\"\n\n# Clean up.\nRUN{program}+=\"/bin/rm %E{TMP_SCRIPT}\"\n\n# Finally, try and mount the volume. On first mount this will fail, but that's\n# OK because the volume was already mounted by the first-mount script.\nRUN{program}+=\"/bin/sh -c '/bin/mount /dev/%k || exit 0'\"\n\nLABEL=\"do_automount_end\"\nEOM\n\n    # Some versions of systemd-udevd end up in a weird state when we add and\n    # trigger rules on-the-fly, as below. Restarting the service seems to\n    # resolve things. See BLOCK-1435 for details.\n    if which systemctl \u0026\u003e /dev/null ; then\n        systemctl restart systemd-udevd.service\n    fi\n\n    # Load the newly-added udev rules and then manually trigger them to catch\n    # any automount volumes that were attached at boot.\n    if which udevadm \u0026\u003e /dev/null ; then\n        udevadm control -R\n        udevadm trigger --action=add --subsystem-match=block\n    fi\nfi\n\n--===============8645434374073493512==--\n\n","public_keys":[],"auth_key":"03e1c1d46981f57f9b471ca19c085013","region":"sfo2","interfaces":{"private":[{"ipv4":{"ip_address":"10.138.42.144","netmask":"255.255.0.0","gateway":"10.138.0.1"},"mac":"16:14:f5:8f:59:ca","type":"private"}],"public":[{"ipv4":{"ip_address":"68.183.172.48","netmask":"255.255.240.0","gateway":"68.183.160.1"},"anchor_ipv4":{"ip_address":"10.46.0.5","netmask":"255.255.0.0","gateway":"10.46.0.1"},"mac":"3e:39:bb:9f:82:2e","type":"public"}]},"floating_ip":{"ipv4":{"active":false}},"reserved_ip":{"ipv4":{"active":false}},"dns":{"nameservers":["67.207.67.3","67.207.67.2"]},"tags":null,"features":{"dhcp_enabled":false},"modify_index":32411573}
